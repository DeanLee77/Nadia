var utils = require("loader-utils");
var strip = require("strip-comments");

module.exports = function(code) {
    this.cacheable && this.cacheable();
    var options = utils.parseQuery(this.query);
    var func;
    if(options.line === false && options.block !== false) {
        // Only line comments
        func = strip.line;
    } else if(options.block === false && options.line !== false) {
        func = strip.block;
    } else {
        func = strip;
    }
    return !this.debug || this.mimimize
        ? func(code, options)
        : code
        ;
}
